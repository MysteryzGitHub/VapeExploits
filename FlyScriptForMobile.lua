-- Fly Script for Mobile Players

-- Set the flying speed (you can adjust this value)
local flySpeed = 5

-- Check if the player is on a mobile device
if game.Players.LocalPlayer.UserId ~= 0 and game:IsMobile() then
    -- Create a fly function
    local function fly()
        -- Check if the player is already flying
        if not game.Players.LocalPlayer.Character:FindFirstChild("HumanoidFly") then
            -- Create a Fly object
            local flyObject = Instance.new("ObjectValue")
            flyObject.Name = "HumanoidFly"
            flyObject.Parent = game.Players.LocalPlayer.Character

            -- Get the player's humanoid
            local humanoid = game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")

            -- Set the flying speed
            humanoid.WalkSpeed = flySpeed

            -- Create a loop to update the player's position
            while wait() do
                -- Check if the player is still flying
                if flyObject.Parent == game.Players.LocalPlayer.Character then
                    -- Get the player's input (touch or keyboard)
                    local input = game:GetService("UserInputService"):GetUserInput(Type.InputObject)

                    -- Update the player's position based on the input
                    if input then
                        local dir = input.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position
                        local unitDir = dir.unit
                        game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = unitDir * flySpeed
                    end
                else
                    -- Stop the loop if the player is no longer flying
                    break
                end
            end
        end
    end

    -- Create a toggle fly function
    local function toggleFly()
        -- Check if the player is already flying
        if game.Players.LocalPlayer.Character:FindFirstChild("HumanoidFly") then
                  -- Remove the Fly object
            game.Players.LocalPlayer.Character:FindFirstChild("HumanoidFly"):Destroy()
        else
            -- Call the fly function
            fly()
        end
    end

    -- Bind the toggle fly function to a key or touch input
    game:GetService("UserInputService").InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.Space or input.UserInputType == Enum.UserInputType.Touch then
            toggleFly()
        end
    end)
end
